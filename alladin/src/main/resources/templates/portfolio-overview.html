<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Portfolio Overview</title>
  <meta charset="UTF-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
  <h2 class="mb-4 text-center">üìä My Portfolio</h2>

  <!-- Summary Metrics: 5 Cards in a Row -->
  <div class="row text-center mb-4">

    <div class="col-md-3 col-sm-6 mb-2">
      <div class="card border-dark">
        <div class="card-body py-2">
          <h6 class="card-title">Realized Equity</h6>
          <p class="card-text text-dark fw-bold fs-6" th:text="${portfolioMetrics['realizedEquity']} + ' ‚Ç¨'">0.00 ‚Ç¨</p>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-2">
      <div class="card border-dark">
        <div class="card-body py-2">
          <h6 class="card-title">Unrealized Equity</h6>
          <p class="card-text text-dark fw-bold fs-6" th:text="${portfolioMetrics['unrealizedEquity']} + ' ‚Ç¨'">0.00 ‚Ç¨</p>
        </div>
      </div>
    </div>


    <div class="col-md-2 col-sm-6 mb-2">
      <div class="card border-success">
        <div class="card-body py-2">
          <h6 class="card-title">Realized P/L</h6>
          <p class="card-text text-success fw-bold fs-6" th:text="${portfolioMetrics['realizedPL']} + ' ‚Ç¨'">0.00 ‚Ç¨</p>
        </div>
      </div>
    </div>
    <div class="col-md-2 col-sm-6 mb-2">
      <div class="card border-primary">
        <div class="card-body py-2">
          <h6 class="card-title">Unrealized P/L</h6>
          <p class="card-text text-primary fw-bold fs-6" th:text="${portfolioMetrics['unrealizedPL']} + ' ‚Ç¨'">0.00 ‚Ç¨</p>
        </div>
      </div>
    </div>
    <div class="col-md-2 col-sm-6 mb-2">
      <div class="card border-dark">
        <div class="card-body py-2">
          <h6 class="card-title">Total P/L</h6>
          <p class="card-text text-dark fw-bold fs-6" th:text="${portfolioMetrics['totalPL']} + ' ‚Ç¨'">0.00 ‚Ç¨</p>
        </div>
      </div>
    </div>

  </div>

  <!-- Open Trades Table -->
  <table class="table table-bordered table-hover">
    <thead class="table-light">
    <tr>
      <th>Stock</th>
      <th>Invested</th>
      <th>Avg Open</th>
      <th>Quantity</th>
      <th>Current Price</th>
      <th>Total Value</th>
      <th>P/L</th>
      <th>Details</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="stock : ${portfolioList}">
      <td th:text="${stock.stockSymbol} + ' - ' + ${stock.stockName}"></td>
      <td th:text="${stock.totalInvested} + ' ‚Ç¨'"></td>
      <td th:text="${stock.averageOpenPrice}"></td>
      <td th:text="${stock.quantity}"></td>
      <td th:text="${stock.currentPrice}"></td>
      <td th:text="${stock.totalValue} + ' ‚Ç¨'"></td>
      <td th:text="${stock.profitLoss} + ' ‚Ç¨'"
          th:classappend="${stock.profitLoss > 0} ? 'text-success' : 'text-danger'"></td>
      <td>
        <a th:href="@{'/trader/portfolio/' + ${stock.stockId}}" class="btn btn-sm btn-primary">View</a>
      </td>
    </tr>
    </tbody>
  </table>
  <br>
  <div class="mt-4 d-flex justify-content-between">
    <a th:href="@{'/trader/closed-trades'}" class="btn btn-outline-dark">View Closed Trades</a>
    <a href="/trader/trader-dashboard" class="btn btn-outline-secondary">‚Üê Back to Dashboard</a>
  </div>

  <br><br>
</div>
</body>
</html>
